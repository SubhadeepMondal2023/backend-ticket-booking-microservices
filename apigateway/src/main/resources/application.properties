spring.application.name=apigateway
server.port=8090

security.excluded.urls=/swagger-ui.html,/swagger-ui/**,/docs/**,/v3/api-docs/**,/swagger-resources/**,/api-docs/**,/api/v1/booking/**,/api/auth/**,/actuator/**,/fallbackRoute,/api/circuit-breaker/**

# Keycloak
keycloak.auth.jwk-set-uri=http://localhost:8091/realms/ticketing-security-realm/protocol/openid-connect/certs
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8091/realms/ticketing-security-realm

# Actuator - Expose all endpoints
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true

# Resilience4j Circuit Breaker - Fixed property names (camelCase to kebab-case)
resilience4j.circuitbreaker.configs.default.register-health-indicator=true
resilience4j.circuitbreaker.configs.default.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.configs.default.sliding-window-size=8
resilience4j.circuitbreaker.configs.default.failure-rate-threshold=50
resilience4j.circuitbreaker.configs.default.minimum-number-of-calls=4
resilience4j.circuitbreaker.configs.default.wait-duration-in-open-state=5s
resilience4j.circuitbreaker.configs.default.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.configs.default.automatic-transition-from-open-to-half-open-enabled=true

# Resilience4j Instance Configuration
resilience4j.circuitbreaker.instances.bookingServiceCircuitBreaker.base-config=default

# Time Limiter
resilience4j.timelimiter.configs.default.timeout-duration=3s

# Retry
resilience4j.retry.configs.default.max-attempts=3
resilience4j.retry.configs.default.wait-duration=2s

# Logging
logging.level.io.github.resilience4j=DEBUG
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.com.example.apigateway=DEBUG